<div class="TucanContainer">
  <div class='RegisterHeader'>
    <button class="CloseLogin" (click)="closeDialog()">Cancel</button>
  </div>
  <h2 mat-dialog-title>Race Registration</h2>
  <div *ngIf="d !== null; else loadingMessage">
    <mat-dialog-content>
      <mat-horizontal-stepper [linear]="true" #stepper>
        <mat-step [editable]="true" [stepControl]="tagForm" *ngIf="d.hasTags">
          <ng-template matStepLabel aria-disabled="true">Select Organizational/Athletic Tag</ng-template>
          <p>Select an athlete or organization type</p>
          <app-tag-select [raceID]="d.race_id" [tagType]="tagType" (emitState)="stepCallback($event)"></app-tag-select>
        </mat-step>
        <mat-step [editable]="true" [stepControl]="cartForm">
          <ng-template matStepLabel aria-disabled="true">Select Items</ng-template>
          <app-cart-edit [raceID]="d.race_id" (checkoutAlert)="stepCallback($event)"></app-cart-edit>
        </mat-step>
        <mat-step [editable]="false" [stepControl]="paymentForm">
          <ng-template matStepLabel aria-disabled="true">Pay Signup Fee</ng-template>
          <app-paypal (transactionAlert)="stepCallback($event)" [price]="d.price" [race_id]="d.race_id"></app-paypal>
        </mat-step>
      </mat-horizontal-stepper>
    </mat-dialog-content>
  </div>
  <ng-template #loadingMessage><p>Loading...</p></ng-template>
</div>