<div class='AboutRaceImageContainer'>
  <img 
    *ngIf="aboutData.race_image != null" 
    src="{{aboutData.race_image}}" 
    alt="race_img"
    class='AboutRaceImage'
  />
</div>

<div class='PageContainer'>
  
  <div class='PageSegment'>
    <a class="nav-link" routerLink='/races'><- Return to Public Races</a>
    <h1>{{aboutData.name}}</h1>
    <p>{{aboutData.description}}</p>

    <!-- icon to indicate race type : 1-run;2-bike;3-all -->

    <i *ngIf="aboutData.race_type == 3" class="material-icons">directions_run</i> <i class="material-icons" >directions_bike</i> 
    <i *ngIf="aboutData.race_type == 1" class="material-icons">directions_run</i>
    <i *ngIf="aboutData.race_type == 2" class="material-icons">directions_bike</i> 
    
  </div>
  
  <div class='PageSegment'>
    <h3>Race Details</h3>
    <div class='MapPreview'>
      <div class='MapContainer'>
        <app-map [raceIDs]="raceID" [displayUsers]="false"></app-map>
      </div>
      <div class='RaceLocationsContainer'>
        <h6>Important Locations</h6>
        <p>
          {{aboutData.start_loc}}
          <br />- to -<br />
          {{aboutData.end_loc}}
        </p>
        <h6>Important Dates</h6>
        <p>
          {{aboutData.start_date}}
          <br />- to -<br />
          {{aboutData.end_date}}
        </p>
      </div>
    </div>
  </div>
  
  <div class='PageSegment'>
    <h3>Action Items</h3>
    <div class='RaceButtonsContainer'>
      <a class="btn"  (click)="viewRace()" *ngIf="hasStarted">View Race</a>

      <a class="btn"  mat-button (click)="goToRaceDashboard()" *ngIf="isOwner || isModerator">GO TO DASHBOARD</a>      

    <button *ngIf="!this._authService.isLoggedIn()" (click)="openModal('custom-modal-3')">Register for Race</button>  
     <app-signup *ngIf="!hasJoined" [price]="raceSettings.price" [hasTags]="raceSettings.has_entry_tags" [aboutData]="aboutData" [race_id]="raceID" [hasStarted]="hasStarted" (signupCallback)="signupCallback($event)" (click)="trySignup()"></app-signup>
    </div>
    <!-- test this by going into the "swag" module in the backend and adding swag to your race -->
   <!-- <app-swag *ngIf="hasMerch" [isOwner]="isOwner" [race_id]="raceID"></app-swag> -->
  </div>

</div>












<!--
<div class="row">
  <div class="column-about1">
   <div class="container" style="text-align: left;" id="raceView">

     <mat-card class="example-card" style="min-height:650px;" >
       <mat-card-header>
         <i class="material-icons" style="color:#2C00A5;" type="button" routerLink='/races'>keyboard_backspace</i>


            <div *ngIf="aboutData.race_type == 1">
              <i class="material-icons" style="color:#BC164D;">directions_run</i> 
            </div>
            <div *ngIf="aboutData.race_type == 2">
              <i class="material-icons" style="color:#BC164D;">directions_bike</i> 
            </div>
            <div *ngIf="aboutData.race_type == 3">
              <i class="material-icons" style="color:#BC164D;">directions_run</i> <i class="material-icons" style="color:#BC164D;">directions_bike</i> 
            </div>

               <mat-card-title>{{aboutData.name}}
               <i class="material-icons" style="color:#BC164D;">directions_run</i>            
<<<<<<< HEAD
               <app-signup *ngIf="!hasJoined" [price]="raceSettings.price" [hasTags]="raceSettings.has_entry_tags" [aboutData]="aboutData" [race_id]="raceID" [hasStarted]="hasStarted" (signupCallback)="signupCallback($event)" [hasPaid]="hasPaid" (click)="trySignup()"></app-signup>
             </mat-card-title>

=======
               <app-signup *ngIf="!hasJoined" [price]="raceSettings.price" [hasTags]="raceSettings.has_entry_tags" style="color:white;
                box-shadow: 0 5px 15px rgba(145, 92, 182, .4);
                background: green;
                border-radius: 4px;
                font-weight: normal;
                text-transform: uppercase;
                transition: all 0.2s ease-in-out;
                width:90px;height:60px;" [aboutData]="aboutData" [race_id]="raceID" [hasStarted]="hasStarted" (signupCallback)="signupCallback($event)" (click)="trySignup()"></app-signup>
             </mat-card-title>

             </div>
             <div *ngIf="aboutData.race_type == 2">
               <mat-card-title>{{aboutData.name}}
                   <i class="material-icons" style="color:#BC164D;">directions_bike</i>
                   <app-signup *ngIf="!hasJoined" [price]="raceSettings.price" [hasTags]="raceSettings.has_entry_tags" style="color:white;
                box-shadow: 0 5px 15px rgba(145, 92, 182, .4);
                background: green;
                border-radius: 4px;
                font-weight: normal;
                text-transform: uppercase;
                transition: all 0.2s ease-in-out;
                width:90px;height:60px;" [aboutData]="aboutData" [race_id]="raceID" [hasStarted]="hasStarted" (signupCallback)="signupCallback($event)" (click)="trySignup()"></app-signup>
                 </mat-card-title>

           </div>
           <div *ngIf="aboutData.race_type == 3">
               <mat-card-title>{{aboutData.name}}
               <i class="material-icons" style="color:#BC164D;">directions_run</i><i class="material-icons" style="color:#BC164D;">directions_bike</i>
               <app-signup *ngIf="!hasJoined" [price]="raceSettings.price" [hasTags]="raceSettings.has_entry_tags" style="color:white;
                box-shadow: 0 5px 15px rgba(145, 92, 182, .4);
                background: green;
                border-radius: 4px;
                font-weight: normal;
                text-transform: uppercase;
                transition: all 0.2s ease-in-out;
                width:90px;height:60px;" [aboutData]="aboutData" [race_id]="raceID" [hasStarted]="hasStarted" (signupCallback)="signupCallback($event)" (click)="trySignup()"></app-signup>
             </mat-card-title>
           </div>
>>>>>>> 636599b85964d7a48e64f974c7f4419df315ff87



       </mat-card-header>
       <mat-card-content>
         <i class="material-icons" style="color:#BC164D">map</i><span id="txt1">From <b>{{ aboutData.start_loc }}</b> to <b>{{aboutData.end_loc}}</b> <i style="color:#BC164D;">   {{ aboutData.distance }} {{ aboutData.distance_type }}</i></span>
        <i class="material-icons" style="color:#BC164D;">date_range</i><span id="txt1">     From <b>{{ aboutData.start_date }}</b> to <b>{{ aboutData.end_date }}</b></span> 

        <i style="font-size:10px; color:#BC164D;"> Need help? Email admin@tucan.fitness </i>

        <div class="row">
          <div class="column-map">

            <mat-card class="example-card" style="border-top-right-radius:0px;border-bottom-right-radius:0px;" >
       <mat-card-header>
        
       </mat-card-header>
       <mat-card-content>
         <app-map [raceIDs]="raceIDs" [displayUsers]="true"></app-map>
         <br><br> <br><br> <br><br><br><br> <br><br> <br><br><br><br> <br><br> <br><br><br><br> <br><br> <br><br>
       </mat-card-content>
     </mat-card>


          </div>

          <div class="column-map">

            <mat-card class="example-card" >
       <mat-card-header>
       
       </mat-card-header>
       <mat-card-content>
        <div style="max-height: 480px;overflow: auto; border-top-left-radius:0px;border-bottom-left-radius:0px;">
         <h4 style="text-align:center;"><b>Live Leaderboard</b></h4>
         <app-leaderboard [raceID]="raceID" [use]="'individual'" [allowFollow]="true"></app-leaderboard>
         
       </div>
       </mat-card-content>
     </mat-card>
    </div>
    </div>
        
    </mat-card-content>
      <mat-card-actions>
    
        <button mat-button (click)="viewRace()" *ngIf="hasStarted">GO TO RACE</button>
        <button mat-button (click)="goToRaceDashboard()" *ngIf="isOwner || isModerator">GO TO DASHBOARD</button>
      </mat-card-actions>
    </mat-card>

     <br>
   </div>
 </div>

 <div class="column-about">

   <div class="container" *ngIf="!showForm">
       <mat-card class="example-card " style="min-height:650px;">
     <mat-card-header>
       <mat-card-title>About Race</mat-card-title>
     

     </mat-card-header>
     <mat-card-content >
       <img src="{{aboutData.race_image}}" alt="race_img" style="width:80%;" class="center">
      <div style="overflow-y: scroll;height: 190px;background-color:#EFFAF7;">
      {{aboutData.description}} 


</div>


<div class="row" *ngIf="hasMerch">
    <app-swag  [isOwner]="isOwner" [race_id]="raceID"></app-swag>
</div>
    

     </mat-card-content>
     <mat-card-actions>
       <button mat-button (click)="toggleForm()" *ngIf="isOwner">EDIT</button>
     </mat-card-actions>
   </mat-card>
   </div>

  
   <div class="container" *ngIf="showForm">
 <form [formGroup]="AboutForm">
   <div class="form-group" style="text-align: left; padding: 5px;">
     <label name="Name">Name</label>
     <input class="form-control" type="text" placeholder="Name" formControlName="name"/>
     <br>
     <div *ngIf="AboutForm.get('name').invalid && (AboutForm.get('name').dirty || AboutForm.get('name').touched)"
   class="alert alert-danger">
   
   <div *ngIf="AboutForm.get('name').errors.required">
      Name is required.
   </div>
   </div>
   </div>

   <div class="form-group" style="text-align: left; padding: 5px;">
     <label name="description">Description</label>
     <textarea class="form-control" type="text" placeholder="Description" formControlName="description"></textarea>
     <br>
     <div *ngIf="AboutForm.get('description').invalid && (AboutForm.get('description').dirty || AboutForm.get('description').touched)"
   class="alert alert-danger">
   
   <div *ngIf="AboutForm.get('description').errors.required">
      Description is required.
   </div>
   </div>
   </div>

   <div class="form-group" style="text-align: left; padding: 5px;">
     <label name="raceImage">Race Image</label>
     <input type="file" formControlName="raceImage" (change)="onSelectFile($event)"/>
   </div>

   <div formGroupName="rules"> 
     <div class="form-group">
       <mat-slide-toggle formControlName="isManual">Allow Manual Entry</mat-slide-toggle>
     </div>
     <div class="form-group">
       <mat-slide-toggle formControlName="allowTeams">Allow Teams</mat-slide-toggle>
     </div>

     <div class="form-group" style="text-align: left; padding: 5px;" *ngIf="AboutForm.get('rules').get('allowTeams').value == true">
       <label>Max Team Size</label>
       <input class="form-control" type="text" formControlName="maxTeamSize" [matAutocomplete]="maxTeamSizeAuto"/>
 
       <mat-autocomplete #maxTeamSizeAuto="matAutocomplete">
         <mat-option *ngFor="let option of teamSizeOptions" [value]="option">
           {{ option }}
         </mat-option>
       </mat-autocomplete>
 
       <div *ngIf="AboutForm.get('rules').get('maxTeamSize').invalid && (AboutForm.get('rules').get('maxTeamSize').dirty || AboutForm.get('rules').get('maxTeamSize').touched)"
     class="alert alert-danger">
     
     <div *ngIf="AboutForm.get('rules').get('maxTeamSize').errors.max">
        Max Team Size is 10
     </div>
     </div>
     </div>

     <div class="form-group">
      <mat-slide-toggle formControlName="paymentRequired">Require Entry Fee</mat-slide-toggle>
    </div>

    <div class="form-group">
      <mat-slide-toggle formControlName="hasSwag">Add Merchandise Widget</mat-slide-toggle>
    </div>

    <div class="form-group" style="text-align: left; padding: 5px;" *ngIf="AboutForm.get('rules').get('paymentRequired').value == true">
      <label>Entry Fee</label>
      <input class="form-control" type="text" formControlName="price"/>

   </div>

   <div class="form-group">
    <mat-slide-toggle formControlName="hasEntryTags">Add Registration Tags</mat-slide-toggle>
   </div>

   <div class="form-group" style="text-align: left; padding: 5px;" *ngIf="AboutForm.get('rules').get('hasEntryTags').value == true">
    <app-tag-form [raceID]="raceID" [tagType]="tagType"></app-tag-form>

 </div>

   

   <div style="padding: 5px; position: relative; float: left;">
     <button class="btn btn-primary" mat-raised-button (click)="update()">Update</button>
     <button class="btn btn-danger" mat-raised-button style="left: 5px;" (click)="toggleForm()">Cancel</button>
   </div>

   </div>
 </form>
</div>

 
         
   
 </div>


</div>




<div class="modal fade" id="registerModal">
 <div class="modal-dialog">
   <div class="modal-content">

    
     <div class="modal-header">
       <h4 class="modal-title">Please Register as a Tucan User First</h4>
       <button type="button" class="close" (click)="hideModal('#registerModal')">&times;</button>
     </div>

   
     <div class="modal-body">
       <app-register (registerAlert)="confirmRegistration($event)"></app-register>
     </div>


   </div>
 </div>
</div>



  <br> -->



  
