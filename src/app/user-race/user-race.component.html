<div class="TucanContainer">
  <div class="UserRaceHeaderRow">
    <div class="UserRaceHeader">
      <h2 *ngIf="userData.is_me; else otherUserRaces">Your races</h2>
      <ng-template #otherUserRaces><h2>{{userData.first_name}}'s races</h2></ng-template>
    </div>
    <div *ngIf="showCreateButton" class="UserRaceHeaderCreateContainer">
      <button (click)="navigateTo('/create')">Create New Race</button>
    </div>
  </div>

  <ng-template [ngIf]='userRaces != null' [ngIfElse]="LoadingUserRacesBlock">
    <ng-template [ngIf]="userRaces.length > 0" [ngIfElse]="NoUserRacesBlock">
      <div *ngFor="let race of userRaces" class="UserRaceItem">
        <div class='UserRaceItemContents'>
          <div class='UserRaceItemHeader'>
            <img class="UserRaceItemImage" *ngIf="race.race_image != null" src="{{race.race_image}}" />
            <div class="UserRaceItemNameContainer">
              <h4 class="UserRaceItemName">{{race.name}}</h4>
            </div>
            <div class='CalendarDaysContainer UserRaceItemCalendarDaysContainer'>
              <div class='CalendarDay'>
                <div class='CalendarDayM'><p class='h7'>{{race.start_date.month}}</p></div>
                <div class='CalendarDayD'><p>{{race.start_date.day}}</p></div>
              </div>
              <div class='CalendarDaysLine'>
                <p class='h7'>to</p>
              </div>
              <div class='CalendarDay'>
                <div class='CalendarDayM'><p class='h7'>{{race.end_date.month}}</p></div>
                <div class='CalendarDayD'><p>{{race.end_date.day}}</p></div>
              </div>
            </div>
          </div>
            
          <div class='RaceLocationsContainer UserRaceItemLocationsContainer'>
            <p class='RaceLocation'>{{race.start_loc}}</p>
            <div class='RaceDistanceLine'>
              <p class='h7'>{{race.distance}} {{race.distance_type}} </p>
            </div>
            <p class='RaceLocation'>{{race.end_loc}}</p>
          </div>

          <div class='UserRaceItemButtons'>
            <button  (click)="viewRace(race)" *ngIf="race.has_started">Go to race</button>
            <button  (click)="viewAbout(race)" *ngIf="race.has_started">Race details</button>
            <p *ngIf="!race.has_started" class='h7'>Come back on race day ({{race.start_date.month}} {{race.start_date.day}}).</p>
          </div>

        </div>
      </div>
    </ng-template>
    <ng-template #NoUserRacesBlock>
      <ng-template [ngIf]="userData.is_me" [ngIfElse]="OtherUserNoRaces">
        <p>You currently do not have any races under your belt.</p>
        <p>Here are some things you can do:</p>
        <ul>
          <li>Head over to <a routerLink='/races'>Public Races</a> to sign up for a race.</li>
          <li><a routerLink='/'>Create your own race</a> and manage it from the comforts of your own home.</li>
        </ul>
      </ng-template>
      <ng-template #OtherUserNoRaces>
        <p>{{userData.first_name}} is not signed up to any races for now.</p>
      </ng-template>
    </ng-template>
  </ng-template>
  <ng-template #LoadingUserRacesBlock>
    <p>Loading user races...</p>
  </ng-template>
</div>