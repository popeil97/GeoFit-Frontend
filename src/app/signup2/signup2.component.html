<h2 mat-dialog-title>Register for Race!</h2>


<mat-dialog-content>
  <mat-horizontal-stepper [linear]="true" #stepper>
    <mat-step [editable]="true" [stepControl]="tagForm" *ngIf="d.hasTags">
      <ng-template matStepLabel aria-disabled="true">Select Organizational/Athletic Tag</ng-template>
      <app-tag-select [raceID]="race_id" [tagType]="tagType" (emitState)="stepCallback($event)"></app-tag-select>
      
    </mat-step>
    <mat-step [editable]="true" [stepControl]="cartForm">
      <ng-template matStepLabel aria-disabled="true">Select Items</ng-template>
      <app-cart-edit [raceID]="race_id" (checkoutAlert)="stepCallback($event)"></app-cart-edit>
    </mat-step>
    <mat-step [editable]="false" [stepControl]="paymentForm">
      <ng-template matStepLabel aria-disabled="true">Pay Signup Fee</ng-template>
      <app-paypal (transactionAlert)="stepCallback($event)" [price]="d.price" [race_id]="d.race_id"></app-paypal>
    </mat-step>
    <mat-step [attr.disabled]="stepper.selectedIndex != 2" >
      <ng-template matStepLabel aria-disabled="true">Done</ng-template>
      <h2 style="text-align: center;">You are Registered!</h2>
      <div *ngIf="!d.hasStarted" style="text-align:center;">
        reroute to welcome
      </div>

      <div *ngIf="d.hasStarted" style="text-align:center;">
        <h3>You're Ready to join the race!</h3>
      </div>
      
      
    </mat-step>
  </mat-horizontal-stepper>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button class="CloseLogin" *ngIf="stepper.selectedIndex != 1"(click)="closeDialog()">Cancel</button>
  <button mat-button [mat-dialog-close]="true" cdkFocusInitial style="float: center;" class="btn btn-success" *ngIf="stepper.selectedIndex == 1">Complete Registration</button>
</mat-dialog-actions>