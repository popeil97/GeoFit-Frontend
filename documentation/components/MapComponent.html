<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>geo-fit documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">geo-fit documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">




<ol class="breadcrumb">
  <li>Components</li>
  <li>MapComponent</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
        <li >
            <a href="#templateData" role="tab" id="templateData-tab" data-toggle="tab" data-link="template">Template</a>
        </li>
        <li >
            <a href="#styleData" role="tab" id="styleData-tab" data-toggle="tab" data-link="style">Styles</a>
        </li>
        <li >
            <a href="#tree" role="tab" id="tree-tab" data-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/map/map.component.ts</code>
</p>



    <p class="comment">
        <h3>Implements</h3>
    </p>
    <p class="comment">
                    <code><a href="https://angular.io/api/core/AfterViewInit" target="_blank" >AfterViewInit</a></code>
                    <code><a href="https://angular.io/api/core/OnChanges" target="_blank" >OnChanges</a></code>
    </p>


<section>
    <h3>Metadata</h3>
    <table class="table table-sm table-hover">
        <tbody>











            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-map</code></td>
            </tr>

            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>./map.component.css</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./map.component.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#coordsRoute">coordsRoute</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#line">line</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#map">map</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#marker_end">marker_end</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#marker_start">marker_start</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#markersByUserID">markersByUserID</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#popUpsByMarkers">popUpsByMarkers</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#applyCoordinates">applyCoordinates</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#clearMap">clearMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#clearUserPins">clearUserPins</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#createUserHeatPins">createUserHeatPins</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#createUserPins">createUserPins</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#goToUserProfile">goToUserProfile</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#initMap">initMap</a>
                            </li>
                            <li>
                                <a href="#ngAfterViewInit">ngAfterViewInit</a>
                            </li>
                            <li>
                                <a href="#ngOnChanges">ngOnChanges</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#panToUserMarker">panToUserMarker</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#showPinsByID">showPinsByID</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Inputs</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#coordinates">coordinates</a>
                            </li>
                            <li>
                                <a href="#displayUsers">displayUsers</a>
                            </li>
                            <li>
                                <a href="#draw">draw</a>
                            </li>
                            <li>
                                <a href="#followedIDs">followedIDs</a>
                            </li>
                            <li>
                                <a href="#userData">userData</a>
                            </li>
                        </ul>
                    </td>
                </tr>




        </tbody>
    </table>
</section>

    <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(popupService: <a href="../injectables/PopUpService.html">PopUpService</a>, _profileService: <a href="../injectables/UserProfileService.html">UserProfileService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">src/app/map/map.component.ts:36</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>popupService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/PopUpService.html" target="_self" >PopUpService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>_profileService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/UserProfileService.html" target="_self" >UserProfileService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

    <section>
    <h3 id="inputs">Inputs</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="coordinates"></a>
                        <b>coordinates</b>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="24" class="link-to-prism">src/app/map/map.component.ts:24</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="displayUsers"></a>
                        <b>displayUsers</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank" >Boolean</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">src/app/map/map.component.ts:26</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="draw"></a>
                        <b>draw</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank" >Boolean</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="25" class="link-to-prism">src/app/map/map.component.ts:25</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="followedIDs"></a>
                        <b>followedIDs</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/app/map/map.component.ts:28</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="userData"></a>
                        <b>userData</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/app/map/map.component.ts:27</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
</section>



    <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="applyCoordinates"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            applyCoordinates
                        </b>
                        <a href="#applyCoordinates"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>applyCoordinates()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="96"
                            class="link-to-prism">src/app/map/map.component.ts:96</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clearMap"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            clearMap
                        </b>
                        <a href="#clearMap"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clearMap()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="88"
                            class="link-to-prism">src/app/map/map.component.ts:88</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clearUserPins"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            clearUserPins
                        </b>
                        <a href="#clearUserPins"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clearUserPins()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="158"
                            class="link-to-prism">src/app/map/map.component.ts:158</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createUserHeatPins"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            createUserHeatPins
                        </b>
                        <a href="#createUserHeatPins"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createUserHeatPins()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="335"
                            class="link-to-prism">src/app/map/map.component.ts:335</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createUserPins"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            createUserPins
                        </b>
                        <a href="#createUserPins"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createUserPins()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="188"
                            class="link-to-prism">src/app/map/map.component.ts:188</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="goToUserProfile"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            goToUserProfile
                        </b>
                        <a href="#goToUserProfile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>goToUserProfile(username: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="492"
                            class="link-to-prism">src/app/map/map.component.ts:492</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>username</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="initMap"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            initMap
                        </b>
                        <a href="#initMap"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>initMap()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="497"
                            class="link-to-prism">src/app/map/map.component.ts:497</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngAfterViewInit"></a>
                    <span class="name">
                        <b>
                            ngAfterViewInit
                        </b>
                        <a href="#ngAfterViewInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngAfterViewInit()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="67"
                            class="link-to-prism">src/app/map/map.component.ts:67</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnChanges"></a>
                    <span class="name">
                        <b>
                            ngOnChanges
                        </b>
                        <a href="#ngOnChanges"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnChanges(changes: <a href="https://angular.io/api/core/SimpleChanges" target="_blank">SimpleChanges</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="42"
                            class="link-to-prism">src/app/map/map.component.ts:42</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>changes</td>
                                    <td>
                                                <code><a href="https://angular.io/api/core/SimpleChanges" target="_blank" >SimpleChanges</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="panToUserMarker"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            panToUserMarker
                        </b>
                        <a href="#panToUserMarker"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>panToUserMarker(user_id)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="74"
                            class="link-to-prism">src/app/map/map.component.ts:74</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user_id</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showPinsByID"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            showPinsByID
                        </b>
                        <a href="#showPinsByID"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>showPinsByID(IDs)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="169"
                            class="link-to-prism">src/app/map/map.component.ts:169</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>IDs</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="coordsRoute"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            coordsRoute</b>
                            <a href="#coordsRoute"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/app/map/map.component.ts:31</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="line"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            line</b>
                            <a href="#line"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">src/app/map/map.component.ts:36</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="map"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            map</b>
                            <a href="#map"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/app/map/map.component.ts:30</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="marker_end"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            marker_end</b>
                            <a href="#marker_end"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="35" class="link-to-prism">src/app/map/map.component.ts:35</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="marker_start"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            marker_start</b>
                            <a href="#marker_start"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/app/map/map.component.ts:34</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="markersByUserID"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            markersByUserID</b>
                            <a href="#markersByUserID"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>{}</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/app/map/map.component.ts:32</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="popUpsByMarkers"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            popUpsByMarkers</b>
                            <a href="#popUpsByMarkers"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>{}</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">src/app/map/map.component.ts:33</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { AfterViewInit, Component, Input, OnInit, OnChanges, SimpleChanges } from &#x27;@angular/core&#x27;;
import { UserProfileService } from &#x27;../userprofile.service&#x27;;
//import * as L from &#x27;leaflet&#x27;;
//import * as markercluster from &#x27;leaflet.markercluster&#x27;;
import { PopUpService } from &#x27;../pop-up.service&#x27;;

import &#x27;leaflet&#x27;;
import &#x27;leaflet.markercluster&#x27;;
import &#x27;leaflet.heat&#x27;;

const L &#x3D; window[&#x27;L&#x27;];
var heat &#x3D; window[&#x27;heat&#x27;]

import * as _ from &#x27;lodash&#x27;;
import * as turf from &#x27;@turf/turf&#x27;;
import { ListKeyManager } from &#x27;@angular/cdk/a11y&#x27;;

@Component({
  selector: &#x27;app-map&#x27;,
  templateUrl: &#x27;./map.component.html&#x27;,
  styleUrls: [&#x27;./map.component.css&#x27;]
})
export class MapComponent implements AfterViewInit,OnChanges {
  @Input() coordinates;
  @Input() draw:Boolean;
  @Input() displayUsers:Boolean;
  @Input() userData:any;
  @Input() followedIDs:any;

  private map;
  private coordsRoute;
  private markersByUserID &#x3D; {};
  private popUpsByMarkers &#x3D; {};
  private marker_start:any;
  private marker_end:any;
  private line:any;

  constructor(private popupService:PopUpService, private _profileService:UserProfileService) {
    Window[&quot;mapComponent&quot;] &#x3D; this;
  }

  ngOnChanges(changes: SimpleChanges) {
    console.log(&#x27;changes:&#x27;,changes);

    for(const propName in changes) {
      if(changes.hasOwnProperty(propName)) {

        switch(propName) {
          case &#x27;coordinates&#x27;:
            console.log(&#x27;COORDS CHANGED&#x27;);
            if(changes.coordinates.currentValue !&#x3D; undefined) {
              this.applyCoordinates();
              this.coordsRoute &#x3D; turf.lineString(this.coordinates.coords, { name: &quot;route&quot; });
              if(this.displayUsers) {
                this.createUserPins();
              }

            }
        }
      }
    }

    console.log(&quot;USER DATA IN MAP COMPONENT&quot;);
    console.log(this.userData);
  }

  ngAfterViewInit(): void {
    if(this.map &#x3D;&#x3D; undefined) {
      this.initMap();
    }

  }

  public panToUserMarker(user_id){
    console.log(&quot;Clicked user id: &quot;, user_id);

    this.markersByUserID[user_id.toString()][&#x27;locMarker&#x27;].openPopup();

    //Do this to simply pan to user pin
    this.map.panTo(this.markersByUserID[user_id.toString()][&#x27;latLng&#x27;]);

    //Do this to pan *and* zoom
    //var markerBounds &#x3D; L.latLngBounds([markersByUserID[user_id.toString()][&#x27;latLng&#x27;]]);
    //var options &#x3D; {&#x27;animate&#x27;: true, &#x27;easeLinearity&#x27;: 0.1}
    //mymap.fitBounds(markerBounds, options);
  }

  public clearMap(): void {
    if(this.marker_start &amp;&amp; this.marker_end &amp;&amp; this.line) {
      this.map.removeLayer(this.marker_start);
      this.map.removeLayer(this.marker_end);
      this.map.removeLayer(this.line);
    }
  }

  private applyCoordinates():void {

    console.log(&#x27;GOT COORDINATES:&#x27;,this.coordinates.coords);
    console.log(&#x27;MAP:&#x27;,this.map);



    if(!this.map) {
      this.initMap()
    }

    //doing this temporarily because Lat/Lon are reversed smh
    var temp_coords &#x3D; [];
    _.forEach(this.coordinates.coords,(coord) &#x3D;&gt; {
      // let temp &#x3D; coord[0];
      // coord[0] &#x3D; coord[1];
      // coord[1] &#x3D; temp;
      temp_coords.push([coord[1], coord[0]]);
    });

    // let start_coord &#x3D; this.coordinates.coords[0];
    // let end_coord &#x3D; this.coordinates.coords[this.coordinates.coords.length-1];
    let start_coord &#x3D; temp_coords[0];
    let end_coord &#x3D; temp_coords[temp_coords.length-1];

    let begin &#x3D; new L.LatLng(start_coord[0], start_coord[1]);
    let finish &#x3D; new L.LatLng(end_coord[0], end_coord[1]);
    let bounds &#x3D; new L.LatLngBounds(begin, finish);

    this.map.fitBounds(bounds, { padding: [15, 15] });

    console.log(&quot;start coord: &quot;, start_coord);

    const lat &#x3D; 29.651634;
    const lon &#x3D; -82.324829;
    this.marker_start &#x3D; L.marker(start_coord,{icon: L.icon({
      iconSize: [ 25, 41 ],
      iconAnchor: [10, 40],
      popupAnchor: [18, -40],
      iconUrl: &#x27;leaflet/marker-icon.png&#x27;,
      shadowUrl: &#x27;leaflet/marker-shadow.png&#x27;,
    })}).addTo(this.map);

    this.marker_start.bindPopup(this.popupService.makePopup({name:&#x27;Start&#x27;,state:&#x27;FL&#x27;}));

    this.marker_end &#x3D; L.marker(end_coord,{icon: L.icon({
      iconSize: [ 38, 36 ],
      iconAnchor: [10, 40],
      popupAnchor: [18, -40],
      iconUrl: &#x27;/media/endflag.png&#x27;,
      shadowUrl: &#x27;leaflet/marker-shadow.png&#x27;,
    })}).addTo(this.map);

    this.marker_end.bindPopup(this.popupService.makePopup({name:&#x27;End&#x27;,state:&#x27;FL&#x27;}));

    this.line &#x3D; L.polyline(temp_coords,{
      color: &quot;Blue&quot;,
      weight: 8,
      opacity: 0.65
    }).addTo(this.map);
  }

public clearUserPins(){
    //Remove all current user pins
    console.log(this.markersByUserID);
    for (var id in this.markersByUserID){
      console.log(&quot;removing id &quot;, id)
      this.markersByUserID[id][&#x27;locMarker&#x27;].remove();
      //If this doesn&#x27;t work, try
      //this.map.removeLayer(this.markersByUserID[id][&#x27;locMarker&#x27;]);
    }
  }

  public showPinsByID(IDs){
    //Clear all pins
    this.clearUserPins();

    //Add user markers based on IDs argument
    //If IDs null, add all users
    for (var id in this.markersByUserID){
      if (IDs &#x3D;&#x3D; null || IDs.includes(parseInt(id))){
        this.markersByUserID[id][&#x27;locMarker&#x27;].addTo(this.map);
      }
      else {
        this.markersByUserID[id][&#x27;locMarker&#x27;].remove();
        //If this doesn&#x27;t work, try
        //this.map.removeLayer(this.markersByUserID[id][&#x27;locMarker&#x27;]);
      }
    }
  }

 
  public createUserPins(){
    // doing this temporarily because Lat/Lon are reversed smh
    // _.forEach(this.coordinates.coords,(coord) &#x3D;&gt; {
    //   let temp &#x3D; coord[0];
    //   coord[0] &#x3D; coord[1];
    //   coord[1] &#x3D; temp;
    // });
    this.clearUserPins();
    //heat.remove();
    var maxMarkersInCluster &#x3D; 4;

    var markerClusters &#x3D; L.markerClusterGroup({
      //disableClusteringAtZoom: 12, //12
      maxClusterRadius: 25, //20
      animateAddingMarkers: true,
      iconCreateFunction: function(cluster){
          var markers &#x3D; cluster.getAllChildMarkers();

          //Maximum of 4 imgs per cluster (choose first 4 children)
          var markersInCluster &#x3D; Math.min(maxMarkersInCluster, markers.length);

          var inner_html &#x3D; &#x27;&#x27;;

          for (let i &#x3D; 0; i &lt; markersInCluster; i++){
            var img_class &#x3D; &#x27;pos&#x27; + (i).toString() + &#x27;of&#x27; + markersInCluster.toString();

            var content &#x3D; markers[i][&#x27;options&#x27;][&#x27;icon&#x27;][&#x27;options&#x27;][&#x27;html&#x27;]
            var regex &#x3D; /&lt;img.*?src&#x3D;[&#x27;&quot;](.*?)[&#x27;&quot;]/;
            var img_src &#x3D; regex.exec(content)[1];

            inner_html +&#x3D; &quot;&lt;img class&#x3D;\&quot;&quot; + img_class + &quot;\&quot; src&#x3D;\&quot;&quot; + img_src + &quot;\&quot;&gt;&quot;
          }

          //Remember to add the pin to the cluster pin
          inner_html +&#x3D; &#x27;&lt;div class&#x3D;&quot;pin&quot;&gt;&lt;/div&gt;&#x27;;

          var divClass &#x3D; &#x27;cluster-pin-&#x27; + markersInCluster.toString();

          return L.divIcon({
            className: divClass,
            html: inner_html,
            iconSize: [30, 30],
            iconAnchor: [10, 33],
            popupAnchor: [0, -62],
          });
        }
    });

    //Add pin clusters to map
    this.map.addLayer(markerClusters);

    var heatArray &#x3D; new Array(this.userData.length);

    for (var i &#x3D; 0; i &lt; this.userData.length; i++){
      var img_html &#x3D; &quot;&lt;img src&#x3D;\&quot;&quot; + this.userData[i].profile_url + &quot;\&quot;;\&quot;&gt;&lt;div class&#x3D;\&quot;pin\&quot;&gt;&lt;/div&gt;&lt;div class&#x3D;\&quot;pulse\&quot;&gt;&lt;/div&gt;&quot;;

      var userIcon &#x3D; L.divIcon({
        className: &#x27;location-pin&#x27;,
        html: img_html,
        iconSize: [30, 30],
        iconAnchor: [10, 33],
        popupAnchor: [0, -62],
      });

      var user_ran_miles &#x3D; this.userData[i].total_distance;

      var along_user &#x3D; turf.along(this.coordsRoute, user_ran_miles, {units: &#x27;miles&#x27;});

      var lng_user &#x3D; along_user.geometry.coordinates[0];
      var lat_user &#x3D; along_user.geometry.coordinates[1];

      var locMarker &#x3D; L.geoJSON(along_user, {
        pointToLayer: function(feature, latlng) {
          return L.marker(latlng, { icon: userIcon });
        }
      })
        //.addTo(this.map)

      markerClusters.addLayer(locMarker);

      //Create template popup text
      var popupText &#x3D; &quot;&lt;center&gt;&lt;b&gt;&quot; +
                      this.userData[i].display_name +
                      &quot;&lt;/b&gt;&lt;/center&gt;&quot; +
                      &quot;&lt;center&gt;&quot; +
                      user_ran_miles +
                      &quot; &quot; +
                      &#x27;miles&#x27; +
                      &quot;&lt;/center&gt;&quot;;

      // //Get story image and caption
      // var userStoryImg &#x3D; this.userData[i].story_image;
      // var userStoryCaption &#x3D; this.userData[i].story_text;

      // //Add story info to marker popup
      // if (userStoryImg || userStoryCaption){
      //     popupText +&#x3D; &quot;&lt;center&gt;&quot; +
      //             &quot;&lt;a data-toggle&#x3D;\&quot;modal\&quot; data-target&#x3D;\&quot;#storyModal\&quot; data-userstatindex&#x3D;\&quot;&quot; +
      //             i +
      //             &quot;\&quot;&gt;&quot; +
      //             &quot;&lt;br&gt;&lt;img src&#x3D;\&quot;&quot; +
      //             userStoryImg +
      //             &quot;\&quot; style&#x3D;\&quot;max-width:150px;\&quot;&gt;&lt;/a&gt;&quot; +
      //             &quot;&lt;/center&gt;&quot; +
      //             &quot;&lt;center&gt;&quot; +
      //             userStoryCaption +
      //             &quot;&lt;/center&gt;&quot;;
      // }

      //Temp before we retrieve logged in user&#x27;s ID
      //locMarker.bindPopup(popupText, {maxWidth: 200});

      this.popUpsByMarkers[locMarker[&#x27;_leaflet_id&#x27;].toString()] &#x3D; popupText;

      //Retain markers in dict so we can pan to it upon select
      let elementID &#x3D; this.userData[i].user_id
      this.markersByUserID[elementID] &#x3D; {
          &#x27;locMarker&#x27; : locMarker,
          &#x27;latLng&#x27; : L.latLng(lat_user, lng_user),
      };

    }
      //To work with markercluster, we store popUpText in dict and display onclick (see below)
      
    //POPUPS (unfortunately ruined by markercluster, but fixed here)
    var popUpsByMarkers &#x3D; this.popUpsByMarkers;
    markerClusters.on(&#x27;click&#x27;, function(ev) {
      // Current marker is ev.layer

      if (!ev.layer.getPopup()){
        //Get popup content if it isn&#x27;t binded
        let popUpText &#x3D; popUpsByMarkers[(ev.layer[&#x27;_leaflet_id&#x27;]+1).toString()]
        //Display
        ev.layer.bindPopup(popUpText, {maxWidth: 200}).openPopup();
      }
      else if (!ev.layer.getPopup()._isOpen){
        //Open popup if it is already binded
        ev.layer.getPopup().openPopup();
      }
      else {
        //If popup open before click, close it
        ev.layer.getPopup().closePopup();
      }

    });
  }

  public createUserHeatPins(){
    // doing this temporarily because Lat/Lon are reversed smh
    // _.forEach(this.coordinates.coords,(coord) &#x3D;&gt; {
    //   let temp &#x3D; coord[0];
    //   coord[0] &#x3D; coord[1];
    //   coord[1] &#x3D; temp;
    // });
    this.clearUserPins();
    var maxMarkersInCluster &#x3D; 4;

    var markerClusters &#x3D; L.markerClusterGroup({
      //disableClusteringAtZoom: 12, //12
      maxClusterRadius: 25, //20
      animateAddingMarkers: true,
      iconCreateFunction: function(cluster){
          var markers &#x3D; cluster.getAllChildMarkers();

          //Maximum of 4 imgs per cluster (choose first 4 children)
          var markersInCluster &#x3D; Math.min(maxMarkersInCluster, markers.length);

          var inner_html &#x3D; &#x27;&#x27;;

          for (let i &#x3D; 0; i &lt; markersInCluster; i++){
            var img_class &#x3D; &#x27;pos&#x27; + (i).toString() + &#x27;of&#x27; + markersInCluster.toString();

            var content &#x3D; markers[i][&#x27;options&#x27;][&#x27;icon&#x27;][&#x27;options&#x27;][&#x27;html&#x27;]
            var regex &#x3D; /&lt;img.*?src&#x3D;[&#x27;&quot;](.*?)[&#x27;&quot;]/;
            var img_src &#x3D; regex.exec(content)[1];

            inner_html +&#x3D; &quot;&lt;img class&#x3D;\&quot;&quot; + img_class + &quot;\&quot; src&#x3D;\&quot;&quot; + img_src + &quot;\&quot;&gt;&quot;
          }

          //Remember to add the pin to the cluster pin
          inner_html +&#x3D; &#x27;&lt;div class&#x3D;&quot;pin&quot;&gt;&lt;/div&gt;&#x27;;

          var divClass &#x3D; &#x27;cluster-pin-&#x27; + markersInCluster.toString();

          return L.divIcon({
            className: divClass,
            html: inner_html,
            iconSize: [30, 30],
            iconAnchor: [10, 33],
            popupAnchor: [0, -62],
          });
        }
    });

    //Add pin clusters to map
    this.map.addLayer(markerClusters);

    var heatArray &#x3D; new Array(this.userData.length);

    for (var i &#x3D; 0; i &lt; this.userData.length; i++){
      var img_html &#x3D; &quot;&lt;img src&#x3D;\&quot;&quot; + this.userData[i].profile_url + &quot;\&quot;;\&quot;&gt;&lt;div class&#x3D;\&quot;pin\&quot;&gt;&lt;/div&gt;&lt;div class&#x3D;\&quot;pulse\&quot;&gt;&lt;/div&gt;&quot;;

      var userIcon &#x3D; L.divIcon({
        className: &#x27;location-pin&#x27;,
        html: img_html,
        iconSize: [30, 30],
        iconAnchor: [10, 33],
        popupAnchor: [0, -62],
      });

      var user_ran_miles &#x3D; this.userData[i].total_distance;

      var along_user &#x3D; turf.along(this.coordsRoute, user_ran_miles, {units: &#x27;miles&#x27;});

      var lng_user &#x3D; along_user.geometry.coordinates[0];
      var lat_user &#x3D; along_user.geometry.coordinates[1];

      heatArray[i] &#x3D; [lat_user,lng_user,1]
      heatArray[i+this.userData.length] &#x3D; [lat_user,lng_user,1.0]



      var locMarker &#x3D; L.geoJSON(along_user, {
        pointToLayer: function(feature, latlng) {
          return L.marker(latlng, { icon: userIcon });
        }
      })
        //.addTo(this.map)

      markerClusters.addLayer(locMarker);

      //Create template popup text
      var popupText &#x3D; &quot;&lt;center&gt;&lt;b&gt;&quot; +
                      this.userData[i].display_name +
                      &quot;&lt;/b&gt;&lt;/center&gt;&quot; +
                      &quot;&lt;center&gt;&quot; +
                      user_ran_miles +
                      &quot; &quot; +
                      &#x27;miles&#x27; +
                      &quot;&lt;/center&gt;&quot;;

      // //Get story image and caption
      // var userStoryImg &#x3D; this.userData[i].story_image;
      // var userStoryCaption &#x3D; this.userData[i].story_text;

      // //Add story info to marker popup
      // if (userStoryImg || userStoryCaption){
      //     popupText +&#x3D; &quot;&lt;center&gt;&quot; +
      //             &quot;&lt;a data-toggle&#x3D;\&quot;modal\&quot; data-target&#x3D;\&quot;#storyModal\&quot; data-userstatindex&#x3D;\&quot;&quot; +
      //             i +
      //             &quot;\&quot;&gt;&quot; +
      //             &quot;&lt;br&gt;&lt;img src&#x3D;\&quot;&quot; +
      //             userStoryImg +
      //             &quot;\&quot; style&#x3D;\&quot;max-width:150px;\&quot;&gt;&lt;/a&gt;&quot; +
      //             &quot;&lt;/center&gt;&quot; +
      //             &quot;&lt;center&gt;&quot; +
      //             userStoryCaption +
      //             &quot;&lt;/center&gt;&quot;;
      // }

      //Temp before we retrieve logged in user&#x27;s ID
      //locMarker.bindPopup(popupText, {maxWidth: 200});

      this.popUpsByMarkers[locMarker[&#x27;_leaflet_id&#x27;].toString()] &#x3D; popupText;

      //Retain markers in dict so we can pan to it upon select
      let elementID &#x3D; this.userData[i].user_id
      this.markersByUserID[elementID] &#x3D; {
          &#x27;locMarker&#x27; : locMarker,
          &#x27;latLng&#x27; : L.latLng(lat_user, lng_user),
      };

    }

    heatArray &#x3D; heatArray.map(function (p) { return [p[0], p[1]]; });

    heat &#x3D; L.heatLayer(heatArray, {radius: 50},{minOpacity: 1.0}).addTo(this.map);
      //To work with markercluster, we store popUpText in dict and display onclick (see below)
      
    //POPUPS (unfortunately ruined by markercluster, but fixed here)
    var popUpsByMarkers &#x3D; this.popUpsByMarkers;
    markerClusters.on(&#x27;click&#x27;, function(ev) {
      // Current marker is ev.layer

      if (!ev.layer.getPopup()){
        //Get popup content if it isn&#x27;t binded
        let popUpText &#x3D; popUpsByMarkers[(ev.layer[&#x27;_leaflet_id&#x27;]+1).toString()]
        //Display
        ev.layer.bindPopup(popUpText, {maxWidth: 200}).openPopup();
      }
      else if (!ev.layer.getPopup()._isOpen){
        //Open popup if it is already binded
        ev.layer.getPopup().openPopup();
      }
      else {
        //If popup open before click, close it
        ev.layer.getPopup().closePopup();
      }

    });
  }



  private goToUserProfile(username:string){
    this._profileService.goToUserProfile(username);
  }


  private initMap(): void {
    this.map &#x3D; L.map(&#x27;map&#x27;, {
      center: [ 39.8282, -98.5795 ],
      zoom: 3
    });

    const tiles &#x3D; L.tileLayer(&#x27;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&#x27;, {
      maxZoom: 19,
      attribution: &#x27;&amp;copy; &lt;a href&#x3D;&quot;http://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt;&#x27;
    });

    tiles.addTo(this.map);

    //An extract of address points from the LINZ bulk extract: http://www.linz.govt.nz/survey-titles/landonline-data/landonline-bde
//Should be this data set: http://data.linz.govt.nz/#/layer/779-nz-street-address-electoral/

    
  }


}
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-templateData">
        <pre class="line-numbers"><code class="language-html">&lt;div class&#x3D;&quot;map-container&quot;&gt;
    &lt;div id&#x3D;&quot;map&quot;&gt;&lt;/div&gt;
&lt;/div&gt;</code></pre>
    </div>

    <div class="tab-pane fade " id="c-styleData">
                <p class="comment">
                    <code>./map.component.css</code>
                </p>
                <pre class="line-numbers"><code class="language-scss">.map-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

.map-frame {
  border: 2px solid black;
  height: 100%;
  width: 100%;
}

#map {
  height: 100%;
  width: 100%;
}


/* ***** Leaflet Icons ****
.location-pin img {
  width: 46px;
  height: 46px;
  margin: -26px 0 0 -28px;
  z-index: 10;
  position: absolute;
  border-radius: 50%;
  background: #32383e;
}

.pin {
  width: 50px;
  height: 50px;
  border-radius: 50% 50% 50% 0;
  background: #32383e;
  position: absolute;
  transform: rotate(-45deg);
  left: 50%;
  top: 50%;
  margin: -43px 0 0 -30px;
}

.pin:after {
  content: &#x27;&#x27;;
  width: 26px;
  height: 26px;
  margin: 2px 0 0 2px;
  position: absolute;
  border-radius: 50%;
}

.pulse {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 50%;
  height: 14px;
  width: 14px;
  position: absolute;
  left: 50%;
  top: 50%;
  margin: 15px 0px 0px -12px;
  transform: rotateX(55deg);
  z-index: -2;
}

.pulse:after {
  content: &quot;&quot;;
  border-radius: 50%;
  height: 40px;
  width: 40px;
  position: absolute;
  margin: -16px 0 0 -13px;
  animation: pulsate 2.5s ease-out;
  animation-iteration-count: infinite;
  opacity: 0;
  background: rgba(94, 190, 255, 0.5);
  box-shadow: 0 0 1px 2px #2d99d3;
  animation-delay: 1.1s;
} */
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><div class="map-container">    <div id="map"></div></div></div>'
    var COMPONENTS = [{'name': 'ActivitiesMenuComponent', 'selector': 'app-activities-menu'},{'name': 'AppComponent', 'selector': 'app-root'},{'name': 'CommentsComponent', 'selector': 'app-comments'},{'name': 'CommentsFormComponent', 'selector': 'app-comments-form'},{'name': 'FeedComponent', 'selector': 'app-feed'},{'name': 'LeaderboardComponent', 'selector': 'app-leaderboard'},{'name': 'LoaderComponent', 'selector': 'app-loader'},{'name': 'LoginComponent', 'selector': 'app-login'},{'name': 'ManualEntryComponent', 'selector': 'app-manual-entry'},{'name': 'MapComponent', 'selector': 'app-map'},{'name': 'NavComponent', 'selector': 'app-nav'},{'name': 'NotificationComponent', 'selector': 'app-notification'},{'name': 'ProfileFormComponent', 'selector': 'app-profile-form'},{'name': 'RaceAboutComponent', 'selector': 'app-race-about'},{'name': 'RaceComponent', 'selector': 'app-race'},{'name': 'RaceCreateComponent', 'selector': 'app-race-create'},{'name': 'RaceMenuComponent', 'selector': 'app-race-menu'},{'name': 'RacesComponent', 'selector': 'app-races'},{'name': 'RaceSettingsComponent', 'selector': 'app-race-settings'},{'name': 'RaceViewComponent', 'selector': 'app-race-view'},{'name': 'RegisterComponent', 'selector': 'app-register'},{'name': 'StoryBtnComponent', 'selector': 'app-story-btn'},{'name': 'StoryFormComponent', 'selector': 'app-story-form'},{'name': 'StoryModalComponent', 'selector': 'app-story-modal'},{'name': 'StravauthComponent', 'selector': 'app-stravauth'},{'name': 'TeamFormComponent', 'selector': 'app-team-form'},{'name': 'TeamListComponent', 'selector': 'app-team-list'},{'name': 'UserFollowComponent', 'selector': 'app-user-follow'},{'name': 'UserPageComponent', 'selector': 'app-user-page'},{'name': 'UserProfileNavComponent', 'selector': 'app-user-profile-nav'},{'name': 'UserProgressComponent', 'selector': 'app-user-progress'},{'name': 'UsersComponent', 'selector': 'app-users'},{'name': 'UserStatsComponent', 'selector': 'app-user-stats'}];
    var DIRECTIVES = [];
    var ACTUAL_COMPONENT = {'name': 'MapComponent'};
</script>
<script src="../js/tree.js"></script>










                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'MapComponent.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
